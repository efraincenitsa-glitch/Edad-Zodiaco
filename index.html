<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Zodiaco</title>

<link rel="apple-touch-icon" href="icons/icon-1024.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#0b132b">

<style>
:root{
  --bg1:#0b132b;
  --bg2:#1c2541;
  --accent:#3a86ff;
}
*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  display:grid;
  place-items:center;
  font-family:system-ui, sans-serif;
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
  color:white;
}
.card{
  width:100%;
  max-width:420px;
  padding:2rem;
  background:rgba(0,0,0,.35);
  border-radius:28px;
  box-shadow:0 25px 60px rgba(0,0,0,.5);
  text-align:center;
}
h1{margin:0 0 1.5rem}
input,select,button{
  width:100%;
  padding:1rem;
  margin-top:.9rem;
  border-radius:18px;
  border:none;
  font-size:1rem;
}
input,select{background:white}
button{
  margin-top:1.4rem;
  background:var(--accent);
  color:white;
  font-weight:700;
  cursor:pointer;
}
.result{
  margin-top:1.6rem;
  font-size:1.05rem;
  line-height:1.55;
}
</style>
</head>

<body>
<div class="card">
  <h1>üîÆ Zodiaco</h1>

  <input id="nombre" placeholder="Nombre">
  <input id="anio" type="number" placeholder="A√±o">
  <input id="dia" type="number" placeholder="D√≠a">

  <select id="mes">
    <option value="">Mes</option>
    <option value="1">Enero</option><option value="2">Febrero</option>
    <option value="3">Marzo</option><option value="4">Abril</option>
    <option value="5">Mayo</option><option value="6">Junio</option>
    <option value="7">Julio</option><option value="8">Agosto</option>
    <option value="9">Septiembre</option><option value="10">Octubre</option>
    <option value="11">Noviembre</option><option value="12">Diciembre</option>
  </select>

  <button onclick="calcular()">Calcular</button>
  <div id="out" class="result"></div>
</div>

<script>
function signoOccidental(d,m){
  const s=[
    ["Capricornio","‚ôë",12,22,1,19],["Acuario","‚ôí",1,20,2,18],
    ["Piscis","‚ôì",2,19,3,20],["Aries","‚ôà",3,21,4,19],
    ["Tauro","‚ôâ",4,20,5,20],["G√©minis","‚ôä",5,21,6,20],
    ["C√°ncer","‚ôã",6,21,7,22],["Leo","‚ôå",7,23,8,22],
    ["Virgo","‚ôç",8,23,9,22],["Libra","‚ôé",9,23,10,22],
    ["Escorpio","‚ôè",10,23,11,21],["Sagitario","‚ôê",11,22,12,21]
  ];
  return s.find(x=>(m==x[2]&&d>=x[3])||(m==x[4]&&d<=x[5]));
}

function zodiacoChino(a){
  const z=[["Rata","üê≠"],["Buey","üêÆ"],["Tigre","üêØ"],["Conejo","üê∞"],
           ["Drag√≥n","üê≤"],["Serpiente","üêç"],["Caballo","üê¥"],["Cabra","üêê"],
           ["Mono","üêµ"],["Gallo","üêî"],["Perro","üê∂"],["Cerdo","üê∑"]];
  return z[(a-1900)%12];
}

function faseLunar(d,m,y){
  const c=2551443, r=Date.UTC(1970,0,7,20,35)/1000;
  const t=Date.UTC(y,m-1,d)/1000;
  const f=(((t-r)%c)+c)%c/c;
  const i=Math.round(f*8)%8;
  const l=[["Luna nueva","üåë"],["Creciente","üåí"],["Cuarto creciente","üåì"],
           ["Gibosa creciente","üåî"],["Luna llena","üåï"],
           ["Gibosa menguante","üåñ"],["Cuarto menguante","üåó"],["Menguante","üåò"]];
  return l[i];
}

function diasParaCumple(d,m){
  const h=new Date();
  let c=new Date(h.getFullYear(),m-1,d);
  if(c<h) c=new Date(h.getFullYear()+1,m-1,d);
  return Math.ceil((c-h)/(1000*60*60*24));
}

function calcular(){
  const n=nombre.value||"";
  const a=+anio.value, d=+dia.value, m=+mes.value;
  if(!a||!d||!m){ 
    out.innerHTML="‚ö†Ô∏è Completa todos los datos"; 
    return; 
  }

  const hoy = new Date();
  let e = hoy.getFullYear() - a;

  // üî• Correcci√≥n de edad exacta
  if (
    hoy.getMonth() + 1 < m ||
    (hoy.getMonth() + 1 === m && hoy.getDate() < d)
  ) {
    e--;
  }

  const s=signoOccidental(d,m);
  const c=zodiacoChino(a);
  const l=faseLunar(d,m,a);
  const f=diasParaCumple(d,m);

  out.innerHTML=`
    <strong>${n}</strong><br>
    Edad: <strong>${e}</strong><br><br>
    ${s[1]} <strong>${s[0]}</strong><br>
    ${c[1]} <strong>${c[0]}</strong><br>
    ${l[1]} <strong>${l[0]}</strong><br><br>
    üéâ Faltan <strong>${f}</strong> d√≠as para tu cumplea√±os
  `;
}

// ‚Äî‚Äî Bloque extensi√≥n d√≠as, horas y minutos vividos ‚Äî‚Äî
(function () {
  const MS_MIN = 60 * 1000;
  const MS_HR  = 60 * MS_MIN;
  const MS_DIA = 24 * MS_HR;

  function difsVividos(d, m, y) {
    const nacimiento = new Date(y, m - 1, d);
    if (isNaN(nacimiento)) return null;

    const ahora = new Date();

    const n0 = new Date(nacimiento); n0.setHours(0,0,0,0);
    const h0 = new Date(ahora);      h0.setHours(0,0,0,0);

    const dias       = Math.floor((h0 - n0) / MS_DIA);
    const horasTot   = Math.floor((ahora - nacimiento) / MS_HR);
    const minutosTot = Math.floor((ahora - nacimiento) / MS_MIN);

    return { dias, horasTot, minutosTot };
  }

  const calcularOriginal = window.calcular;
  window.calcular = function () {
    calcularOriginal();

    const a = +document.getElementById('anio').value;
    const d = +document.getElementById('dia').value;
    const m = +document.getElementById('mes').value;

    const res = difsVividos(d, m, a);
    if (res) {
      const { dias, horasTot, minutosTot } = res;
      const out = document.getElementById('out');
      out.innerHTML += `
        <br>üóìÔ∏è Has vivido <strong>${dias.toLocaleString('es-MX')}</strong> d√≠as
        <br>‚è±Ô∏è Has vivido <strong>${horasTot.toLocaleString('es-MX')}</strong> horas
        <br>üïí Has vivido <strong>${minutosTot.toLocaleString('es-MX')}</strong> minutos
      `;
    }
  };
})();
</script>

</body>
</html>
